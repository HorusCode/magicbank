function mask(e,t,n,s){let o=$("."+n).prev("."+t);$("."+e).on("click",function(){o.parent().switchClass("bounceOutUp","bounceInDown"),$(o.parent().parent()).css("visibility","visible"),$(".mask").css("visibility","visible").switchClass("hidden",s,500)}),$(o).on("click",function(){o.parent().switchClass("bounceInDown","bounceOutUp"),$(".mask").switchClass(s,"hidden",500,"swing",function(){$(this).css("visibility","hidden"),$(o.parent().parent()).css("visibility","hidden")})})}function canvasDollar(){!function(){let e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=e}();let e=$(".canvas-dollar")[0];if(e.width=window.innerWidth,e.height=window.innerHeight+200,e.getContext){let t=e.getContext("2d"),n=e.width,s=e.height;t.fillStyle="rgba(0,0,0,0.13)",t.font="bolder 10em Montserrat";let o=[],i=6;for(let e=0;e<i;e++)o.push({x:Math.random()*n,y:Math.random()*s,xs:4*Math.random()-4+2,ys:Math.random()+1});let a=[];for(let e=0;e<i;e++)a[e]=o[e];requestAnimationFrame(function e(){t.clearRect(0,0,n,s);for(let e=0;e<a.length;e++){let n=a[e];t.beginPath(),t.fillText("$",n.x,n.y)}!function(){for(let e=0;e<a.length;e++){let t=a[e];t.x+=t.xs,t.y+=t.ys,(t.x>n||t.y>s)&&(t.x=Math.random()*n,t.y=20)}}(),requestAnimationFrame(e)})}}function showModal(e,t,n=".close-button"){$(".btn"+e).on("click",function(){$(t).fadeIn()}),$(n).on("click",function(){$(t).fadeOut()})}function showMsg(e){$("#msg").text(e).show(),setTimeout(function(){$("#msg").slideUp()},2e3)}let UserData;function setUserData(e){$(".user-name").text(e.user.surname+" "+e.user.name+" "+e.user.father_name),$(".date_birthday").text(e.user.date_birthday),$(".passport_num").text(e.user.passport_num),$(".passport_office").text(e.user.passport_office),$(".passport_series").text(e.user.passport_series),$(".passport_series").text(e.user.passport_series),$(".user_info--score .header-text").text("№ "+e.score.id),$(".residence").text(e.user.residence),$(".phone").text(e.user.phone),$(".percent").text(e.contribution.percent+" %"),$(".date_close").text(e.contribution.percent+" %"),$(".taken").text(function(){return 0==e.contribution.replenished?"Нет":"Да"}),$(".replinished").text(function(){return 0==e.contribution.taken?"Нет":"Да"}),$("input[name='id_score']").val(e.score.id);let t=e.score.money,n=Number(e.attachment.start_money),s=0;console.log(e);for(let t=0;t<Object.keys(e.attachment_history).length;t++)s=Number(e.attachment_history[t].came_money);let o=[t,n,s,Math.floor(n*Math.pow(1+e.contribution.percent/100,e.attachment.days/365))];$(".not-result").hide(),$(".user_info-box").fadeIn(),$(".user_info--score").fadeIn(),$(".user_info--functions").fadeIn(),scoreChart(o)}function scoreChart(e){let t=$(".user-score"),n={labels:["На счету","Начальная сумма","Начислено","Конечная сумма"],datasets:[{data:e,backgroundColor:["#FF6384","#63FF84","#ffda22","#8463FF","#6384FF"]}]};Chart.defaults.global.defaultFontFamily="Montserrat",Chart.defaults.global.defaultFontSize=16;let s={rotation:-Math.PI,cutoutPercentage:70,circumference:2*Math.PI,plugins:{doughnutlabel:{labels:[]},labels:[{render:"value",position:"outside"}]},legend:{position:"left"},animation:{animateRotate:!0,animateScale:!1}};new Chart(t,{type:"doughnut",data:n,options:s})}$(function(){let e=$(".tabs-box > div");e.hide().filter(":first").show(),$(".tabs-link a").on("click",function(){return e.hide(),e.filter(this.hash).show(),$(".tabs-link a").removeClass("active"),$(this).addClass("active"),!1}).filter(":first").click()}),$(function(){$(".input-visible").on("change",function(){let e=$(this);e.val().length?e.addClass("populated"):e.removeClass("populated")})}),$(function(){let e=$(".header"),t=$(window);t.on("scroll",function(){let n=t.scrollTop(),s=location.pathname;s.search("/user|operator/")>=0?e.toggleClass("colorized",!1):"/"!=s?e.toggleClass("colorized",!0):n<680?e.toggleClass("colorized",!1):e.toggleClass("colorized",!0)})}),$(document).ready(function(){showModal(".set-money",".modal.set-money"),showModal(".get-money",".modal.get-money"),showModal(".close-score",".modal.close-score",".close-button, .btn.no"),$(".enterme").focusin(function(){$(this).prev().addClass("to-be-label")}),$(".enterme").blur(function(){0==$(this).val()&&$(this).prev().removeClass("to-be-label")}),$(".grid-fixed .form-register").hide().filter(":first").show(),mask("login","hide","form-login","dark"),mask("register","hide","form-register","random");let e=$(".step-bar ul li"),t=$(".grid-fixed .form-register");$(".firstNext").on("click",n=>{$(e[1]).find(".number").addClass("active"),$(e[1]).find(".line").addClass("active"),$(t[0]).switchClass("zoomIn","zoomOut",function(){$(t[1]).switchClass("zoomOut","zoomIn",300,function(){$(t[0]).hide(),$(this).show()})})}),$(".secondNext").on("click",n=>{$(e[2]).find(".number").addClass("active"),$(e[2]).find(".line").addClass("active"),$(t[1]).switchClass("zoomIn","zoomOut",function(){$(t[2]).switchClass("zoomOut","zoomIn",300,function(){$(t[1]).hide(),$(this).show()})})}),$(".firstPrev").on("click",n=>{$(e[1]).find(".number").removeClass("active"),$(e[1]).find(".line").removeClass("active"),$(t[1]).switchClass("zoomIn","zoomOut",function(){$(t[0]).switchClass("zoomOut","zoomIn",300,function(){$(t[1]).hide(),$(this).show()})})}),$(".secondPrev").on("click",n=>{$(e[2]).find(".number").removeClass("active"),$(e[2]).find(".line").removeClass("active"),$(t[2]).switchClass("zoomIn","zoomOut",function(){$(t[1]).switchClass("zoomOut","zoomIn",300,function(){$(t[2]).hide(),$(this).show()})})}),$("#registration").click(function(){let e="";t.each(function(){let t=$(this).find(".box").serialize();e+=t+"&"}),$.ajax({url:"/account/registration/",type:"POST",data:e,success:function(e){window.location="/user/index/"+e}})}),$(".btn[name='login']").click(function(){let e="";t.each(function(){let t=$("#log").serialize();e+=t+"&"}),$.ajax({url:"/account/login/",type:"POST",data:e,success:function(e){let t=JSON.parse(e);0==t.status?showMsg(t.message):window.location=t.message}})}),$(".search-input .fa-search").on("click",function(){let e=$(".search-input .passport-series").val(),t=$(".search-input .passport-num").val();$.post(window.location+"/search/",{passport_num:t,passport_series:e},function(e){let t=JSON.parse(e);t.status?(UserData=t,setUserData(t.message)):showMsg(t.message)})}),$(".fa-eye").click(function(){let e="text"==$("#pwd").attr("type")?"password":"text",t="rgb(59, 71, 107)"==$(this).css("color")?"#fff":"#3b476b";$(this).css({color:t}),$("#pwd").prop("type",e)}),$("#toggleMenu .thumbs").on("click",function(){$("#sidebar-menu li span").css({opacity:1,"margin-left":"10px"}),$("#sidebar-menu").toggleClass("slide")}),$("#sidebar-menu li").on("click",function(){$("#sidebar-menu li").not(this).removeClass("selected"),$(this).toggleClass("selected")})}),$("#print").on("click",function(){let e=$(this).parent();e.hide(),$("#printed").printThis({importCSS:!0,importStyle:!0,printContainer:!0,loadCSS:"../css/main.min.css",formValues:!0,canvas:!0}),setTimeout(function(){e.show()},1e3)}),$(function(){$(".sum, .date").on("input",function(){let e=this.value.replace(/[^\d]/g,"");this.value=e}).on("blur",function(){let e=$(this).data("size");switch($(this).data("math")){case"min":this.value<=e&&(this.value=e);break;case"max":this.value>=e&&(this.value=e)}})}),$(".calc").on("click",function(){let e=$(".sum").val(),t=$(".date").val(),n=$(".percent").text().replace(/[^\d]/g,"");console.log(n);let s=Math.floor(e*Math.pow(1+n/100,t/365));$(".end-money").text(s+" руб"),$(".plus-money").text(s-e+" руб")}),$(window).on("load resize",function(){let e=$(".tbl-content").width()-$(".tbl-content .table").width();$(".tbl-header").css({"padding-right":e})}).resize();